# smith

The Rust program generator.

# Structure

The code containing the generator is under `src/generator`.
The code containing the AST is under `src/program`.

## Generator

The generator part of `smith` depends on and uses structs from `src/program` to maintain an abstract sytax tree of the program it is generating.

### Summary of program generation

`main_gen.rs` is the starting point for generating programs. Its main function generates a string representing the program.

A struct table is created, see `struct_gen.rs`, which is used to generates structs. Since it contains the structs, we use the struct table to choose random available types when a type for a variable is needed.

A series of functions are generated using `func_gen.rs`, each having a block statement, which is generated using `stmt_gen.rs`. Within these statements are a list statements, some requiring expressions which are generated by `expr_gen.rs`.

To modify generation constants such as maximum loop depth, maximum arithmetic expression depth, see `src/generator/consts.rs`.

To modify the weights for the grammar productions, see `src/generator/weights`. Note that turning off the weight for literals (primitives) will still allow them to be produced, since literals are used when the program generator has no other options.
